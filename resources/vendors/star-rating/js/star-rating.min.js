(function(e){"use strict";if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{if(typeof module==="object"&&module.exports){module.exports=e(require("jquery"))}else{e(window.jQuery)}}})(function(f){"use strict";f.fn.ratingLocales={};f.fn.ratingThemes={};var d,p;d={NAMESPACE:".rating",DEFAULT_MIN:0,DEFAULT_MAX:5,DEFAULT_STEP:.5,isEmpty:function(e,t){return e===null||e===undefined||e.length===0||t&&f.trim(e)===""},getCss:function(e,t){return e?" "+t:""},addCss:function(e,t){e.removeClass(t).addClass(t)},getDecimalPlaces:function(e){var t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return!t?0:Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0))},applyPrecision:function(e,t){return parseFloat(e.toFixed(t))},handler:function(e,t,a,n,i){var r=i?t:t.split(" ").join(d.NAMESPACE+" ")+d.NAMESPACE;if(!n){e.off(r)}e.on(r,a)}};p=function(e,t){var a=this;a.$element=f(e);a._init(t)};p.prototype={constructor:p,_parseAttr:function(e,t){var a=this,n=a.$element,i=n.attr("type"),r,l,s,o;if(i==="range"||i==="number"){l=t[e]||n.data(e)||n.attr(e);switch(e){case"min":s=d.DEFAULT_MIN;break;case"max":s=d.DEFAULT_MAX;break;default:s=d.DEFAULT_STEP}r=d.isEmpty(l)?s:l;o=parseFloat(r)}else{o=parseFloat(t[e])}return isNaN(o)?s:o},_parseValue:function(e){var t=this,a=parseFloat(e);if(isNaN(a)){a=t.clearValue}return t.zeroAsNull&&(a===0||a==="0")?null:a},_setDefault:function(e,t){var a=this;if(d.isEmpty(a[e])){a[e]=t}},_initSlider:function(e){var t=this,a=t.$element.val();t.initialValue=d.isEmpty(a)?0:a;t._setDefault("min",t._parseAttr("min",e));t._setDefault("max",t._parseAttr("max",e));t._setDefault("step",t._parseAttr("step",e));if(isNaN(t.min)||d.isEmpty(t.min)){t.min=d.DEFAULT_MIN}if(isNaN(t.max)||d.isEmpty(t.max)){t.max=d.DEFAULT_MAX}if(isNaN(t.step)||d.isEmpty(t.step)||t.step===0){t.step=d.DEFAULT_STEP}t.diff=t.max-t.min},_initHighlight:function(e){var t=this,a,n=t._getCaption();if(!e){e=t.$element.val()}a=t.getWidthFromValue(e)+"%";t.$filledStars.width(a);t.cache={caption:n,width:a,val:e}},_getContainerCss:function(){var e=this;return"rating-container"+d.getCss(e.theme,"theme-"+e.theme)+d.getCss(e.rtl,"rating-rtl")+d.getCss(e.size,"rating-"+e.size)+d.getCss(e.animate,"rating-animate")+d.getCss(e.disabled||e.readonly,"rating-disabled")+d.getCss(e.containerClass,e.containerClass)+(e.displayOnly?" is-display-only":"")},_checkDisabled:function(){var e=this,t=e.$element,a=e.options;e.disabled=a.disabled===undefined?t.attr("disabled")||false:a.disabled;e.readonly=a.readonly===undefined?t.attr("readonly")||false:a.readonly;e.inactive=e.disabled||e.readonly;t.attr({disabled:e.disabled,readonly:e.readonly})},_addContent:function(e,t){var a=this,n=a.$container,i=e==="clear";if(a.rtl){return i?n.append(t):n.prepend(t)}else{return i?n.prepend(t):n.append(t)}},_generateRating:function(){var e=this,t=e.$element,a,n,i;n=e.$container=f(document.createElement("div")).insertBefore(t);d.addCss(n,e._getContainerCss());e.$rating=a=f(document.createElement("div")).attr("class","rating-stars").appendTo(n).append(e._getStars("empty")).append(e._getStars("filled"));e.$emptyStars=a.find(".empty-stars");e.$filledStars=a.find(".filled-stars");e._renderCaption();e._renderClear();e._initHighlight();e._initCaptionTitle();n.append(t);if(e.rtl){i=Math.max(e.$emptyStars.outerWidth(),e.$filledStars.outerWidth());e.$emptyStars.width(i)}t.appendTo(a)},_getCaption:function(){var e=this;return e.$caption&&e.$caption.length?e.$caption.html():e.defaultCaption},_setCaption:function(e){var t=this;if(t.$caption&&t.$caption.length){t.$caption.html(e)}},_renderCaption:function(){var e=this,t=e.$element.val(),a,n=e.captionElement?f(e.captionElement):"";if(!e.showCaption){return}a=e.fetchCaption(t);if(n&&n.length){d.addCss(n,"caption");n.html(a);e.$caption=n;return}e._addContent("caption",'<div class="caption">'+a+"</div>");e.$caption=e.$container.find(".caption")},_renderClear:function(){var e=this,t,a=e.clearElement?f(e.clearElement):"";if(!e.showClear){return}t=e._getClearClass();if(a.length){d.addCss(a,t);a.attr({title:e.clearButtonTitle}).html(e.clearButton);e.$clear=a;return}e._addContent("clear",'<div class="'+t+'" title="'+e.clearButtonTitle+'">'+e.clearButton+"</div>");e.$clear=e.$container.find("."+e.clearButtonBaseClass)},_getClearClass:function(){var e=this;return e.clearButtonBaseClass+" "+(e.inactive?"":e.clearButtonActiveClass)},_toggleHover:function(e){var t=this,a,n,i;if(!e){return}if(t.hoverChangeStars){a=t.getWidthFromValue(t.clearValue);n=e.val<=t.clearValue?a+"%":e.width;t.$filledStars.css("width",n)}if(t.hoverChangeCaption){i=e.val<=t.clearValue?t.fetchCaption(t.clearValue):e.caption;if(i){t._setCaption(i+"")}}},_init:function(e){var a=this,t=a.$element.addClass("rating-input"),n;a.options=e;f.each(e,function(e,t){a[e]=t});if(a.rtl||t.attr("dir")==="rtl"){a.rtl=true;t.attr("dir","rtl")}a.starClicked=false;a.clearClicked=false;a._initSlider(e);a._checkDisabled();if(a.displayOnly){a.inactive=true;a.showClear=false;a.hoverEnabled=false;a.hoverChangeCaption=false;a.hoverChangeStars=false}a._generateRating();a._initEvents();a._listen();n=a._parseValue(t.val());t.val(n);return t.removeClass("rating-loading")},_initCaptionTitle:function(){var e=this,t;if(e.showCaptionAsTitle){t=e.fetchCaption(e.$element.val());e.$rating.attr("title",f(t).text())}},_trigChange:function(e){var t=this;t._initCaptionTitle();t.$element.trigger("change").trigger("rating:change",e)},_initEvents:function(){var f=this;f.events={_getTouchPosition:function(e){var t=d.isEmpty(e.pageX)?e.originalEvent.touches[0].pageX:e.pageX;return t-f.$rating.offset().left},_listenClick:function(e,t){e.stopPropagation();e.preventDefault();if(e.handled!==true){t(e);e.handled=true}else{return false}},_noMouseAction:function(e){return!f.hoverEnabled||f.inactive||e&&e.isDefaultPrevented()},initTouch:function(e){var t,a,n,i,r,l,s,o,c=f.clearValue||0,u="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch;if(!u||f.inactive){return}t=e.originalEvent;a=!d.isEmpty(t.touches)?t.touches:t.changedTouches;n=f.events._getTouchPosition(a[0]);if(e.type==="touchend"){f._setStars(n);o=[f.$element.val(),f._getCaption()];f._trigChange(o);f.starClicked=true}else{i=f.calculate(n);r=i.val<=c?f.fetchCaption(c):i.caption;l=f.getWidthFromValue(c);s=i.val<=c?l+"%":i.width;f._setCaption(r);f.$filledStars.css("width",s)}},starClick:function(e){var t,a;f.events._listenClick(e,function(e){if(f.inactive){return false}t=f.events._getTouchPosition(e);f._setStars(t);a=[f.$element.val(),f._getCaption()];f._trigChange(a);f.starClicked=true})},clearClick:function(e){f.events._listenClick(e,function(){if(!f.inactive){f.clear();f.clearClicked=true}})},starMouseMove:function(e){var t,a;if(f.events._noMouseAction(e)){return}f.starClicked=false;t=f.events._getTouchPosition(e);a=f.calculate(t);f._toggleHover(a);f.$element.trigger("rating:hover",[a.val,a.caption,"stars"])},starMouseLeave:function(e){var t;if(f.events._noMouseAction(e)||f.starClicked){return}t=f.cache;f._toggleHover(t);f.$element.trigger("rating:hoverleave",["stars"])},clearMouseMove:function(e){var t,a,n,i;if(f.events._noMouseAction(e)||!f.hoverOnClear){return}f.clearClicked=false;t='<span class="'+f.clearCaptionClass+'">'+f.clearCaption+"</span>";a=f.clearValue;n=f.getWidthFromValue(a)||0;i={caption:t,width:n,val:a};f._toggleHover(i);f.$element.trigger("rating:hover",[a,t,"clear"])},clearMouseLeave:function(e){var t;if(f.events._noMouseAction(e)||f.clearClicked||!f.hoverOnClear){return}t=f.cache;f._toggleHover(t);f.$element.trigger("rating:hoverleave",["clear"])},resetForm:function(e){if(e&&e.isDefaultPrevented()){return}if(!f.inactive){f.reset()}}}},_listen:function(){var e=this,t=e.$element,a=t.closest("form"),n=e.$rating,i=e.$clear,r=e.events;d.handler(n,"touchstart touchmove touchend",f.proxy(r.initTouch,e));d.handler(n,"click touchstart",f.proxy(r.starClick,e));d.handler(n,"mousemove",f.proxy(r.starMouseMove,e));d.handler(n,"mouseleave",f.proxy(r.starMouseLeave,e));if(e.showClear&&i.length){d.handler(i,"click touchstart",f.proxy(r.clearClick,e));d.handler(i,"mousemove",f.proxy(r.clearMouseMove,e));d.handler(i,"mouseleave",f.proxy(r.clearMouseLeave,e))}if(a.length){d.handler(a,"reset",f.proxy(r.resetForm,e),true)}return t},_getStars:function(e){var t=this,a='<span class="'+e+'-stars">',n;for(n=1;n<=t.stars;n++){a+='<span class="star">'+t[e+"Star"]+"</span>"}return a+"</span>"},_setStars:function(e){var t=this,a=arguments.length?t.calculate(e):t.calculate(),n=t.$element,i=t._parseValue(a.val);n.val(i);t.$filledStars.css("width",a.width);t._setCaption(a.caption);t.cache=a;return n},showStars:function(e){var t=this,a=t._parseValue(e);t.$element.val(a);t._initCaptionTitle();return t._setStars()},calculate:function(e){var t=this,a=d.isEmpty(t.$element.val())?0:t.$element.val(),n=arguments.length?t.getValueFromPosition(e):a,i=t.fetchCaption(n),r=t.getWidthFromValue(n);r+="%";return{caption:i,width:r,val:n}},getValueFromPosition:function(e){var t=this,a=d.getDecimalPlaces(t.step),n,i,r=t.$rating.width();i=t.diff*e/(r*t.step);i=t.rtl?Math.floor(i):Math.ceil(i);n=d.applyPrecision(parseFloat(t.min+i*t.step),a);n=Math.max(Math.min(n,t.max),t.min);return t.rtl?t.max-n:n},getWidthFromValue:function(e){var t=this,a=t.min,n=t.max,i,r=t.$emptyStars,l;if(!e||e<=a||a===n){return 0}l=r.outerWidth();i=l?r.width()/l:1;if(e>=n){return 100}return(e-a)*i*100/(n-a)},fetchCaption:function(e){var t=this,a=parseFloat(e)||t.clearValue,n,i,r,l,s,o=t.starCaptions,c=t.starCaptionClasses;if(a&&a!==t.clearValue){a=d.applyPrecision(a,d.getDecimalPlaces(t.step))}l=typeof c==="function"?c(a):c[a];r=typeof o==="function"?o(a):o[a];i=d.isEmpty(r)?t.defaultCaption.replace(/\{rating}/g,a):r;n=d.isEmpty(l)?t.clearCaptionClass:l;s=a===t.clearValue?t.clearCaption:i;return'<span class="'+n+'">'+s+"</span>"},destroy:function(){var e=this,t=e.$element;if(!d.isEmpty(e.$container)){e.$container.before(t).remove()}f.removeData(t.get(0));return t.off("rating").removeClass("rating rating-input")},create:function(e){var t=this,a=e||t.options||{};return t.destroy().rating(a)},clear:function(){var e=this,t='<span class="'+e.clearCaptionClass+'">'+e.clearCaption+"</span>";if(!e.inactive){e._setCaption(t)}return e.showStars(e.clearValue).trigger("change").trigger("rating:clear")},reset:function(){var e=this;return e.showStars(e.initialValue).trigger("rating:reset")},update:function(e){var t=this;return arguments.length?t.showStars(e):t.$element},refresh:function(e){var t=this,a=t.$element;if(!e){return a}return t.destroy().rating(f.extend(true,t.options,e)).trigger("rating:refresh")}};f.fn.rating=function(o){var c=Array.apply(null,arguments),u=[];c.shift();this.each(function(){var e=f(this),t=e.data("rating"),a=typeof o==="object"&&o,n=a.theme||e.data("theme"),i=a.language||e.data("language")||"en",r={},l={},s;if(!t){if(n){r=f.fn.ratingThemes[n]||{}}if(i!=="en"&&!d.isEmpty(f.fn.ratingLocales[i])){l=f.fn.ratingLocales[i]}s=f.extend(true,{},f.fn.rating.defaults,r,f.fn.ratingLocales.en,l,a,e.data());t=new p(this,s);e.data("rating",t)}if(typeof o==="string"){u.push(t[o].apply(t,c))}});switch(u.length){case 0:return this;case 1:return u[0]===undefined?this:u[0];default:return u}};f.fn.rating.defaults={theme:"",language:"en",stars:5,filledStar:'<i class="glyphicon glyphicon-star"></i>',emptyStar:'<i class="glyphicon glyphicon-star-empty"></i>',containerClass:"",size:"md",animate:true,displayOnly:false,rtl:false,showClear:true,showCaption:true,starCaptionClasses:{.5:"label label-danger badge-danger",1:"label label-danger badge-danger",1.5:"label label-warning badge-warning",2:"label label-warning badge-warning",2.5:"label label-info badge-info",3:"label label-info badge-info",3.5:"label label-primary badge-primary",4:"label label-primary badge-primary",4.5:"label label-success badge-success",5:"label label-success badge-success"},clearButton:'<i class="glyphicon glyphicon-minus-sign"></i>',clearButtonBaseClass:"clear-rating",clearButtonActiveClass:"clear-rating-active",clearCaptionClass:"label label-default badge-secondary",clearValue:null,captionElement:null,clearElement:null,showCaptionAsTitle:true,hoverEnabled:true,hoverChangeCaption:true,hoverChangeStars:true,hoverOnClear:true,zeroAsNull:true};f.fn.ratingLocales.en={defaultCaption:"{rating} Stars",starCaptions:{.5:"Half Star",1:"One Star",1.5:"One & Half Star",2:"Two Stars",2.5:"Two & Half Stars",3:"Three Stars",3.5:"Three & Half Stars",4:"Four Stars",4.5:"Four & Half Stars",5:"Five Stars"},clearButtonTitle:"Clear",clearCaption:"Not Rated"};f.fn.rating.Constructor=p;f(document).ready(function(){var e=f("input.rating");if(e.length){e.removeClass("rating-loading").addClass("rating-loading").rating()}})});